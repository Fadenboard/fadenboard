@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   DESIGN TOKENS
   Light is default. Dark via prefers-color-scheme
   or by setting <html data-theme="dark">
   ========================================================= */

:root {
  /* Core surfaces */
  --bg: 248 250 252;          /* soft off-white */
  --surface: 255 255 255;     /* cards */
  --surface-2: 241 245 249;   /* subtle panels */

  /* Text */
  --ink: 15 23 42;            /* slate-900 */
  --muted: 100 116 139;       /* slate-500 */
  --subtle: 148 163 184;      /* slate-400 */

  /* Accents */
  --red: 220 38 38;           /* red-600 */
  --blue: 37 99 235;          /* blue-600 */

  /* Borders + shadows */
  --border: 15 23 42 / 0.10;
  --shadow: 15 23 42 / 0.10;

  /* Glass */
  --glass-bg: 255 255 255 / 0.55;
  --glass-border: 15 23 42 / 0.12;
}

/* Auto dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: 2 6 23;               /* near-black blue */
    --surface: 15 23 42;        /* slate-900 */
    --surface-2: 30 41 59;      /* slate-800 */

    --ink: 226 232 240;         /* slate-200 */
    --muted: 148 163 184;       /* slate-400 */
    --subtle: 100 116 139;      /* slate-500 */

    --border: 226 232 240 / 0.12;
    --shadow: 0 0 0 / 0.45;

    --glass-bg: 15 23 42 / 0.60;
    --glass-border: 226 232 240 / 0.14;
  }
}

/* Manual override */
html[data-theme="dark"] {
  --bg: 2 6 23;
  --surface: 15 23 42;
  --surface-2: 30 41 59;

  --ink: 226 232 240;
  --muted: 148 163 184;
  --subtle: 100 116 139;

  --border: 226 232 240 / 0.12;
  --shadow: 0 0 0 / 0.45;

  --glass-bg: 15 23 42 / 0.60;
  --glass-border: 226 232 240 / 0.14;
}

/* =========================================================
   BASE
   ========================================================= */

html, body {
  height: 100%;
}

body {
  background-color: rgb(var(--bg));
  color: rgb(var(--ink));
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  -webkit-font-smoothing: antialiased;
}

/* Selection */
::selection {
  background: rgb(var(--blue) / 0.25);
}

/* Links */
a {
  color: rgb(var(--blue));
  text-decoration: none;
}

a:hover {
  color: rgb(var(--red));
}

/* =========================================================
   GLASS UTILITIES
   ========================================================= */

.glass {
  background-color: rgb(var(--glass-bg));
  backdrop-filter: blur(14px) saturate(120%);
  -webkit-backdrop-filter: blur(14px) saturate(120%);
  border: 1px solid rgb(var(--glass-border));
  box-shadow:
    0 10px 30px rgb(var(--shadow)),
    inset 0 1px 0 rgb(255 255 255 / 0.08);
}

.glass-soft {
  background-color: rgb(var(--glass-bg));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgb(var(--glass-border));
}

.glass-hover {
  transition: box-shadow 160ms ease, border-color 160ms ease, transform 160ms ease;
}

.glass-hover:hover {
  border-color: rgb(var(--blue) / 0.35);
  box-shadow:
    0 18px 50px rgb(var(--blue) / 0.20),
    inset 0 1px 0 rgb(255 255 255 / 0.10);
  transform: translateY(-1px);
}

/* =========================================================
   BUTTONS
   ========================================================= */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.75rem;
  padding: 0.5rem 0.875rem;
  font-size: 0.875rem;
  font-weight: 600;
  transition: all 150ms ease;
}

.btn-ghost {
  color: rgb(var(--ink));
}

.btn-ghost:hover {
  background-color: rgb(var(--ink) / 0.06);
}

.btn-primary {
  color: white;
  background-image: linear-gradient(
    90deg,
    rgb(var(--blue)),
    rgb(var(--red))
  );
  box-shadow: 0 8px 24px rgb(var(--blue) / 0.35);
}

.btn-primary:hover {
  opacity: 0.95;
  box-shadow: 0 12px 32px rgb(var(--red) / 0.35);
}

/* =========================================================
   INPUTS
   ========================================================= */

input,
textarea,
select {
  background-color: rgb(var(--surface));
  border: 1px solid rgb(var(--border));
  color: rgb(var(--ink));
  border-radius: 0.75rem;
  padding: 0.5rem 0.75rem;
  outline: none;
}

input::placeholder,
textarea::placeholder {
  color: rgb(var(--subtle));
}

input:focus,
textarea:focus,
select:focus {
  border-color: rgb(var(--blue));
  box-shadow: 0 0 0 3px rgb(var(--blue) / 0.20);
}

/* =========================================================
   REDDIT-STYLE STRUCTURE HELPERS
   ========================================================= */

.vote {
  border-radius: 0.75rem;
  padding: 0.25rem 0.5rem;
  font-weight: 700;
  transition: background-color 120ms ease, color 120ms ease;
}

.vote-up.active {
  background-color: rgb(var(--blue));
  color: white;
}

.vote-down.active {
  background-color: rgb(var(--red));
  color: white;
}

.vote:not(.active):hover {
  background-color: rgb(var(--ink) / 0.08);
}

/* =========================================================
   SCROLLBARS
   ========================================================= */

* {
  scrollbar-width: thin;
  scrollbar-color: rgb(var(--blue)) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
}

*::-webkit-scrollbar-thumb {
  background-color: rgb(var(--blue) / 0.6);
  border-radius: 999px;
}

*::-webkit-scrollbar-thumb:hover {
  background-color: rgb(var(--red) / 0.8);
}

/* =========================================================
   ANIMATION HELPERS
   ========================================================= */

.fade-in {
  animation: fadeIn 160ms ease-out both;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
